--- 
title: "Data Skills for the Life Sciences course"
author: "iain stott"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: iainmstott/DSftLS
description: "This book accompanies the BGY2011M Data Skills for the Life 
Sciences module at the School of Life Sciences, University of Lincoln"
---

Create a .R file in the folder you wish to use as your working directory. Type
in the commands* in this worksheet and check your outputs against the outputs
below. This worksheet contains _Questions_ and _Tasks_ in _italics_: note 
down the answers you get, and we'll go through them at the end of the session.

*typing really is better than copy-pasting, as it helps the R language stick in your 
brain better. It's a better approach to learning programming. But then every time I teach R,
someone copy-pastes... so I guess some of you will too.


***
## RESOURCES

Books:
 
* Beckerman, Childs & Petchey (2017) _Getting started with R, an 
introduction for Biologists_, 2nd ed. pp 1 - 34, Chapter 1, "Getting and 
getting acquainted with R".
\ 

Cheatsheets:

* RStudio IDE cheatsheet by RStudio - see Resources section on blackboard or 
download [here](https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf)
* Week 1: base-R cheatsheet by RStudio - see Resources section on blackboard or 
download [here](http://github.com/rstudio/cheatsheets/raw/master/base-r.pdf)
\ 

Web links:

* [R for beginners](https://education.rstudio.com/learn/beginner) by RStudio  
\ 

***
## R BASICS
With this worksheet, we'll go through some basics of working with R. This will
include learning components of R code:

* objects
   + assignment to objects
   + object classes
* functions
   + function arguments
* outputs
* comments
\

R is used for _Object-Oriented Programming (OOP)_, which means that in R, you 
create __objects__ (packets of data which is saved in the computer's RAM), which
can be recalled and used throughout that R session, until they are either 
overwritten or removed. These objects have different __classes__, which define
what the object is. R will work with objects differently, depending on their
class: for example, it is possible to calculate the mean of a vector of numbers,
but not of a vector of words!  
\

Think of this like... Minecraft. You create _bricks_ (our _objects_)
of different _types_ (our _classes_) to build a world within your session. You 
can do certain things with some types of brick, but not others. At the
end of an R session, like in Minecraft, you can delete your world, or you can 
save your session.  
\

First of all, create a new .R file in the folder of your choice. You'll type
code from this exercise into that file, with comments, and save it so that
you can use it again in the future, and re-create exactly the same results.
This is important for scientific TRANSPARENCY and REPRODUCIBILITY: this 
way, others can clearly understand what you've done with your data, and 
they can re-create the same results that you have.  
\

***
## OBJECTS

This section covers how to create objects, what classes mean, what functions 
are and how they work.  
\

Objects are created using __functions__. functions take the form 
`function(argument1, argument2, ...)`. Each function takes unique arguments,
and a different object is created depending on what these arguments are.
```{r}
numbers <- seq(1, 10, 1)
numbers
```
\

The object `numbers` is a __numeric vector__: this means a sequence of 
numbers. You can see that the class of `numbers` is numeric:
```{r}
class(numbers)
```
\

We can do certain things with this vector. For example, we might want to see a 
summary about it, find out what its length is, or calculate the mean:
```{r}
summary(numbers)
length(numbers)
mean(numbers)
```
\

We can change or add arguments to make a function behave differently. For example:
```{r}
summary(numbers, digits = 1)
```
\
_Question: How has this changed the output?_  
\

Going back to the original creation of the `numbers` object, we can change the 
arguments to create a different object.
```{r}
numbers2 <- seq(2, 20, 2)
numbers2
```
\

_Question: What do the three arguments of the `seq` function mean?_  
\

Maybe now we want to use `numbers1` instead of `numbers`. We can create `numbers1`
which has the same value as `numbers`, and remove `numbers`:
```{r}
numbers1 <- numbers
rm(numbers)
```
\

As you can see, we can create an object from another object. In fact, you can
create object using multiple other objects, and objects can be created in 
different ways.
```{r}
numbers1 <- 1:10  # this gives the same values as seq(1, 10, 1)
numbers2 <- numbers1 * 2
```
\

We use the `#` (hash) symbol to create a comment: nothing after it will be run
as code. It's good practise to comment your code as you go, so when you 
go back to it later, it makes sense to you. Trust me, you make life so much 
easier for your future self if you comment well!  
\

_Task: create an object called `numbers3` which is the three-times-table up to
30._  
\

***
## CLASSES

We'll create a new object which looks kinda like our original object, but is
not actually the same.
```{r}
characters1 <- c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10")
characters1
```
\

The `c` function is really important. It means concatenate, and basically 
glues together the arguments you give it. The `characters1` object 
looks similar to the `numbers1` object, but it's not. Note the quote marks 
around each vector element.  
\

_Question: find out the class of `characters1`._  
\

What happens if we try to do the same things with this vector?
```{r}
summary(characters1)
length(characters1)
mean(characters1)
```
\

One of these functions went kinda wrong. As far as R is concerned, the 
elements of `characters1` are words, and it can't calculate the mean of some 
words. It returns `NA`, meaning Not Applicable: R code for something which 
doesn't exist or is missing. The Warning message makes sure you're aware that
something went wrong. R can also return an Error message, which tells you that
the function has failed. Pay attention to these messages: usually if you get 
an Error or a Warning, much of your subsequent code will fail as it depends
on things going right.  
\

It's possible to convert things between different classes, although the 
behaviour is sometimes unpredictable so be careful!
```{r}
characters2 <- as.character(numbers2)
characters2
```
\

***
## CLASS TYPES

There are 5 different class types that it's important to know at this point.

* __numeric__
* __character__
* __factor__
* __logical__
* __data.frame__

### numeric and character

We've encountered numeric and character. Let's create slightly longer vectors:
```{r}
num <- runif(25)
num
char <- LETTERS[1:25]
char
```
\

There are a few new things here. The `runif` function generates random numbers
between 0 and 1. The `LETTERS` object exists already when you load R, and 
contains the alphabet. 
\

It's important to understand how different vectors 'work', but most of this 
experience comes with time. Here's an example:
```{r}
num * 10
num - seq(1, 25, 1)
num * c(10, -10)
```
\

_Question: what's happened for each of those lines of code? What does the Warning
message mean after running the final line?_  
\ 


### factor

A __factor__ object is like a character object, but recognises groups of elements
which are the same, called _levels_. Let's take a look:
```{r}
fac <- rep(LETTERS[1:5], 5)
fac <- as.factor(fac)
```
\

We use the square brackets to choose which letters we
want: we choose A, B, C, D and E. The `rep` function means repeat, so we 
repeat A to E five times, to give a vector that has a length of 25.
```{r}
summary(fac)
```
\

We can see from the summary that R recognises the five different factor levels,
A through E.  
\

### logical

Logical objects are perhaps hard to understand at first, but they're simple
really. They basically indicate whether something is `TRUE` or `FALSE`. They
usually relate to a question we ask of our data:
```{r}
over0.5 <- num > 0.5
over0.5
```
\

The result is information on which of your random data are higher than 0.5.  
\

_Question: Do you have the same value for `over0.5` as your neighbour? Why?_  
\

There are lots of questions you can ask of your data, many functions you'll 
encounter on your R journey e.g. 

* `>` greater than 
* `>=` greater than or equal to
* `<` less than
* `<=` less than or equal to
* `==` exactly equal to
* `%in%`
\

Let's have a look at that last function. It tells us whether a value or values 
(on the left) exist in the data (on the right). For example:
```{r}
numbers2 %in% numbers1
```
\

This tells you which elements of `numbers2` are numbers in `numbers1`, i.e. 
which elements of `numbers2` are less than or equal to 10.  
\

_Task: show a different way to find out which elements of `numbers2` are less
than or equal to 10._  
\

It's not necessary when using `%in%` for the two vectors to have the same length.  
\

_Task: show code to find out which elements of `char` contain letters found in `fac`?_  
\


### data.frame

Finally, we'll encounter the `data.frame`. This is the way most data is 
stored for data analysis. As we learned earlier, there's one column per variable
and one row per observation. `data.frame`s are simply collections of variables:
```{r}
data <- data.frame(num, char, fac)
```
\

To access variables in a data.frame, you simply use the `$` dollar sign.
```
data$num
```
\

You can read in `data.frame`s from your own data: and you'll learn much more
about that next time...  
\

***
## FINAL TIPS

Use `?` to get help on a function. These help pages take a while to get used 
to, but they lay out what arguments a function takes, what those arguments 
are, what the output (value) of the function is, and some examples.  
\

The internet is really useful. As you get used to R, you'll be able to find
blogs and articles and forums that give you answers. There are also R mailing
lists, but it's best not to email them until you're sure you've done everything
you can to solve your problem.  
\

If something goes wrong with your R coding (usually Errors), then 99.9% of the
time it's because you've made a mistake. R is very literal. Be careful!  
\

_Task: what are the errors ('bugs') in the lines of code below?
```{r eval = FALSE}
mynums <- seq(4, 40, 4,)
mychar <- LETTERS[c(1:5, 21:26)]
length(Mychar)
```
\

These are really common mistakes to make. Be aware!

