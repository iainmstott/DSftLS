<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 DATA HANDLING AND MANAGEMENT | BGY2011M Data Skills for the Life Sciences</title>
  <meta name="description" content="This workbook accompanies the University of Lincoln School of Life Sciences Level 2 Module BGY2011M Data Skills for the Life Sciences." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="4 DATA HANDLING AND MANAGEMENT | BGY2011M Data Skills for the Life Sciences" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This workbook accompanies the University of Lincoln School of Life Sciences Level 2 Module BGY2011M Data Skills for the Life Sciences." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 DATA HANDLING AND MANAGEMENT | BGY2011M Data Skills for the Life Sciences" />
  
  <meta name="twitter:description" content="This workbook accompanies the University of Lincoln School of Life Sciences Level 2 Module BGY2011M Data Skills for the Life Sciences." />
  

<meta name="author" content="Module lead: IAIN STOTT / email istott@lincoln.ac.uk" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="single-variable-plots.html"/>
<link rel="next" href="two-variable-plots.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DSftLS</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.0.1" data-path="index.html"><a href="index.html#the-analytical-process"><i class="fa fa-check"></i><b>1.0.1</b> The analytical process</a></li>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#shiny-apps"><i class="fa fa-check"></i><b>1.2</b> Shiny apps</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#installing-r-packages"><i class="fa fa-check"></i><b>1.3</b> Installing R packages</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#iains-notes"><i class="fa fa-check"></i><b>1.4</b> iain’s notes</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>2</b> R BASICS</a><ul>
<li class="chapter" data-level="2.0.1" data-path="r-basics.html"><a href="r-basics.html#resources"><i class="fa fa-check"></i><b>2.0.1</b> RESOURCES</a></li>
<li class="chapter" data-level="2.0.2" data-path="r-basics.html"><a href="r-basics.html#create-your-r-script"><i class="fa fa-check"></i><b>2.0.2</b> Create your R Script</a></li>
<li class="chapter" data-level="2.1" data-path="r-basics.html"><a href="r-basics.html#r-basics-1"><i class="fa fa-check"></i><b>2.1</b> R BASICS</a></li>
<li class="chapter" data-level="2.2" data-path="r-basics.html"><a href="r-basics.html#objects"><i class="fa fa-check"></i><b>2.2</b> OBJECTS</a></li>
<li class="chapter" data-level="2.3" data-path="r-basics.html"><a href="r-basics.html#classes"><i class="fa fa-check"></i><b>2.3</b> CLASSES</a></li>
<li class="chapter" data-level="2.4" data-path="r-basics.html"><a href="r-basics.html#class-types"><i class="fa fa-check"></i><b>2.4</b> CLASS TYPES</a><ul>
<li class="chapter" data-level="2.4.1" data-path="r-basics.html"><a href="r-basics.html#numeric-and-character"><i class="fa fa-check"></i><b>2.4.1</b> numeric and character</a></li>
<li class="chapter" data-level="2.4.2" data-path="r-basics.html"><a href="r-basics.html#factor"><i class="fa fa-check"></i><b>2.4.2</b> factor</a></li>
<li class="chapter" data-level="2.4.3" data-path="r-basics.html"><a href="r-basics.html#logical"><i class="fa fa-check"></i><b>2.4.3</b> logical</a></li>
<li class="chapter" data-level="2.4.4" data-path="r-basics.html"><a href="r-basics.html#data.frame"><i class="fa fa-check"></i><b>2.4.4</b> data.frame</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="r-basics.html"><a href="r-basics.html#final-tips"><i class="fa fa-check"></i><b>2.5</b> FINAL TIPS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="single-variable-plots.html"><a href="single-variable-plots.html"><i class="fa fa-check"></i><b>3</b> SINGLE VARIABLE PLOTS</a><ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#resources"><i class="fa fa-check"></i><b>3.1</b> RESOURCES</a></li>
<li class="chapter" data-level="3.2" data-path="single-variable-plots.html"><a href="single-variable-plots.html#packages"><i class="fa fa-check"></i><b>3.2</b> PACKAGES</a></li>
<li class="chapter" data-level="3.3" data-path="single-variable-plots.html"><a href="single-variable-plots.html#plotting-single-variables"><i class="fa fa-check"></i><b>3.3</b> PLOTTING SINGLE VARIABLES</a></li>
<li class="chapter" data-level="3.4" data-path="single-variable-plots.html"><a href="single-variable-plots.html#part-1"><i class="fa fa-check"></i><b>3.4</b> PART 1</a></li>
<li class="chapter" data-level="3.5" data-path="single-variable-plots.html"><a href="single-variable-plots.html#user-guide"><i class="fa fa-check"></i><b>3.5</b> USER GUIDE</a></li>
<li class="chapter" data-level="3.6" data-path="single-variable-plots.html"><a href="single-variable-plots.html#subsetting-data"><i class="fa fa-check"></i><b>3.6</b> SUBSETTING DATA</a></li>
<li class="chapter" data-level="3.7" data-path="single-variable-plots.html"><a href="single-variable-plots.html#data-visualisation-one-variable"><i class="fa fa-check"></i><b>3.7</b> DATA VISUALISATION (ONE VARIABLE)</a><ul>
<li class="chapter" data-level="3.7.1" data-path="single-variable-plots.html"><a href="single-variable-plots.html#forward-fold"><i class="fa fa-check"></i><b>3.7.1</b> FORWARD FOLD</a></li>
<li class="chapter" data-level="3.7.2" data-path="single-variable-plots.html"><a href="single-variable-plots.html#ruler-reaction"><i class="fa fa-check"></i><b>3.7.2</b> RULER REACTION</a></li>
<li class="chapter" data-level="3.7.3" data-path="single-variable-plots.html"><a href="single-variable-plots.html#paper-balls"><i class="fa fa-check"></i><b>3.7.3</b> PAPER BALLS</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="single-variable-plots.html"><a href="single-variable-plots.html#part-2"><i class="fa fa-check"></i><b>3.8</b> PART 2</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html"><i class="fa fa-check"></i><b>4</b> DATA HANDLING AND MANAGEMENT</a><ul>
<li class="chapter" data-level="4.1" data-path="r-basics.html"><a href="r-basics.html#resources"><i class="fa fa-check"></i><b>4.1</b> RESOURCES</a></li>
<li class="chapter" data-level="4.2" data-path="single-variable-plots.html"><a href="single-variable-plots.html#packages"><i class="fa fa-check"></i><b>4.2</b> PACKAGES</a></li>
<li class="chapter" data-level="4.3" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html#data-handling"><i class="fa fa-check"></i><b>4.3</b> DATA HANDLING</a></li>
<li class="chapter" data-level="4.4" data-path="single-variable-plots.html"><a href="single-variable-plots.html#part-1"><i class="fa fa-check"></i><b>4.4</b> PART 1</a></li>
<li class="chapter" data-level="4.5" data-path="single-variable-plots.html"><a href="single-variable-plots.html#user-guide"><i class="fa fa-check"></i><b>4.5</b> USER GUIDE</a></li>
<li class="chapter" data-level="4.6" data-path="single-variable-plots.html"><a href="single-variable-plots.html#subsetting-data"><i class="fa fa-check"></i><b>4.6</b> SUBSETTING DATA</a><ul>
<li class="chapter" data-level="4.6.1" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html#slice"><i class="fa fa-check"></i><b>4.6.1</b> <code>slice()</code></a></li>
<li class="chapter" data-level="4.6.2" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html#select"><i class="fa fa-check"></i><b>4.6.2</b> <code>select()</code></a></li>
<li class="chapter" data-level="4.6.3" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html#filter"><i class="fa fa-check"></i><b>4.6.3</b> <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html#adding-variables"><i class="fa fa-check"></i><b>4.7</b> ADDING VARIABLES</a><ul>
<li class="chapter" data-level="4.7.1" data-path="data-handling-and-management.html"><a href="data-handling-and-management.html#mutate"><i class="fa fa-check"></i><b>4.7.1</b> <code>mutate()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="single-variable-plots.html"><a href="single-variable-plots.html#part-2"><i class="fa fa-check"></i><b>4.8</b> PART 2</a></li>
<li class="chapter" data-level="4.9" data-path="r-basics.html"><a href="r-basics.html#final-tips"><i class="fa fa-check"></i><b>4.9</b> FINAL TIPS</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="two-variable-plots.html"><a href="two-variable-plots.html"><i class="fa fa-check"></i><b>5</b> TWO-VARIABLE PLOTS</a><ul>
<li class="chapter" data-level="5.1" data-path="r-basics.html"><a href="r-basics.html#resources"><i class="fa fa-check"></i><b>5.1</b> RESOURCES</a></li>
<li class="chapter" data-level="5.2" data-path="single-variable-plots.html"><a href="single-variable-plots.html#packages"><i class="fa fa-check"></i><b>5.2</b> PACKAGES</a></li>
<li class="chapter" data-level="5.3" data-path="two-variable-plots.html"><a href="two-variable-plots.html#plotting-multiple-variables"><i class="fa fa-check"></i><b>5.3</b> PLOTTING MULTIPLE VARIABLES</a></li>
<li class="chapter" data-level="5.4" data-path="single-variable-plots.html"><a href="single-variable-plots.html#part-1"><i class="fa fa-check"></i><b>5.4</b> PART 1</a></li>
<li class="chapter" data-level="5.5" data-path="single-variable-plots.html"><a href="single-variable-plots.html#user-guide"><i class="fa fa-check"></i><b>5.5</b> USER GUIDE</a></li>
<li class="chapter" data-level="5.6" data-path="single-variable-plots.html"><a href="single-variable-plots.html#subsetting-data"><i class="fa fa-check"></i><b>5.6</b> SUBSETTING DATA</a></li>
<li class="chapter" data-level="5.7" data-path="two-variable-plots.html"><a href="two-variable-plots.html#data-visualisation-two-variables"><i class="fa fa-check"></i><b>5.7</b> DATA VISUALISATION (TWO VARIABLES)</a><ul>
<li class="chapter" data-level="5.7.1" data-path="two-variable-plots.html"><a href="two-variable-plots.html#scatter-points-plots"><i class="fa fa-check"></i><b>5.7.1</b> SCATTER (POINTS) PLOTS</a></li>
<li class="chapter" data-level="5.7.2" data-path="two-variable-plots.html"><a href="two-variable-plots.html#box-plots"><i class="fa fa-check"></i><b>5.7.2</b> BOX PLOTS</a></li>
<li class="chapter" data-level="5.7.3" data-path="two-variable-plots.html"><a href="two-variable-plots.html#violin-plots"><i class="fa fa-check"></i><b>5.7.3</b> VIOLIN PLOTS</a></li>
<li class="chapter" data-level="5.7.4" data-path="two-variable-plots.html"><a href="two-variable-plots.html#bar-plots"><i class="fa fa-check"></i><b>5.7.4</b> BAR PLOTS</a></li>
<li class="chapter" data-level="5.7.5" data-path="two-variable-plots.html"><a href="two-variable-plots.html#experimental-design-nonindependence-and-bias"><i class="fa fa-check"></i><b>5.7.5</b> EXPERIMENTAL DESIGN, NONINDEPENDENCE AND BIAS</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="single-variable-plots.html"><a href="single-variable-plots.html#part-2"><i class="fa fa-check"></i><b>5.8</b> PART 2</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">BGY2011M Data Skills for the Life Sciences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-handling-and-management" class="section level1">
<h1><span class="header-section-number">4</span> DATA HANDLING AND MANAGEMENT</h1>
<p>Create a new .R file in the folder you wish to use as your working directory, to
use in this session.</p>
<p>Tidy Data –&gt; Plot –&gt; Model –&gt; Model Check –&gt; Results.</p>
<p>The worksheet comes in two parts.</p>
<ul>
<li>In the first part, you’ll work with the
<a href="https://iainmstott.shinyapps.io/ShinyGLiM">ShinyGLiM app</a>
to find out what code you would write to achieve certain tasks in R.</li>
<li>In the second part,
you’ll work with real scientific data to apply your new knowledge to real scientific
questions.<br />
<br />
</li>
</ul>
<p>Again, type in the commands rather than copy-pasting…<br />
</p>
<p>Whilst you do part 1, you might want to copy code from the app into your .R
file: in part 2 it might be useful to edit it to get the answers you need!<br />
</p>
<hr />
<div id="resources" class="section level2">
<h2><span class="header-section-number">4.1</span> RESOURCES</h2>
<p>Books:</p>
<ul>
<li>Beckerman, Childs &amp; Petchey (2017) <em>Getting started with R, an
introduction for Biologists</em>, 2nd ed. pp 35 - 78, Chapter 2, “Getting your
data into R” and Chapter 3, “Data management, manipulation and exploration”.
 </li>
</ul>
<p>Cheatsheets:</p>
<ul>
<li>Week 1: data transformation with dplyr cheatsheet by RStudio -
see Resources section on blackboard or download
<a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">here</a></li>
</ul>
<p>Web links:</p>
<ul>
<li><a href="https://education.rstudio.com/learn/beginner%22">R for beginners</a> by RStudio
 </li>
</ul>
<p><a href="https://iainmstott.shinyapps.io/ShinyGLiM"><strong>ShinyGLiM</strong></a><br />
<br />
</p>
</div>
<div id="packages" class="section level2">
<h2><span class="header-section-number">4.2</span> PACKAGES</h2>
<p>You’ll need to load the right packages every time you complete worksheets. In
this session, we will be working with:</p>
<ul>
<li><code>readr</code>, which helps load in data</li>
<li><code>dplyr</code>, which is our data subsetting and manipulation friend</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-handling-and-management.html#cb54-1"></a><span class="kw">library</span>(readr)</span>
<span id="cb54-2"><a href="data-handling-and-management.html#cb54-2"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<p><br />
</p>
<hr />
</div>
<div id="data-handling" class="section level2">
<h2><span class="header-section-number">4.3</span> DATA HANDLING</h2>
<p>We’ve learned some basic stuff in R: objects, classes, assignments, functions,
arguments, outputs, comments. Importantly we’ve learned of a few common classes
of object that we’ll often encounter during our R adventures: numeric,
character, factor, logical, data.frame. We’ve learned how
R works, with the base packages providing the basic functionality, which can be
built upon to get R to work for whatever you might imagine (within reason).
These add-on thingies are called <strong>packages</strong> and you store them in your R
<strong>library</strong>. (R aficionados will tell you not to confuse “package” and “library”:
you load packages, which are stored in youur library, and their brains
explode if you tell them you’re loading the library).</p>
<p>We’ve also learned about <strong>Tidy Data</strong>. Tidy data allows you, as analyst padawans,
to easily subset and manipulate data, so you’re working with the data that you
need to be working with.</p>
<p>In this session, we’re going to learn common means of manipulating data. From
here on, we’ll be using a collection of packages, built by RStudio, called the
<a href="https://www.tidyverse.org"><strong>tidyverse</strong></a> (although we’ll only be using a
few of the ones that are on offer). The tidyverse is a new, emerging way of
programming in R. It’s fast becoming the standard way of coding, athough
old-schoolers like me have taken a while to get used to it.</p>
<p>In this particular session, we’re going to acquaint ourselves with the
<a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a> package. <code>dplyr</code> is an expert
data-wrangler which you can use to organise and manipulate data ready for
plotting and analysis. We’ll be learning:</p>
<ul>
<li>how to read data into R</li>
<li>how to subset data
<ul>
<li><code>slice()</code> and <code>filter()</code> to choose certain rows of the <code>data.frame</code></li>
<li><code>select()</code> to choose certain columns of the <code>data.frame</code></li>
</ul></li>
<li>how to manipulate data
<ul>
<li>how to add a variable to the <code>data.frame</code> using <code>mutate()</code></li>
<li>how to arrange the <code>data.frame</code> by variable values using <code>arrange()</code></li>
</ul></li>
<li>how to use <strong>pipes</strong> to make coding neater and cleaner.<br />
<br />
</li>
</ul>
<hr />
<hr />
</div>
<div id="part-1" class="section level2">
<h2><span class="header-section-number">4.4</span> PART 1</h2>
<p><br />
</p>
</div>
<div id="user-guide" class="section level2">
<h2><span class="header-section-number">4.5</span> USER GUIDE</h2>
<p>Read the USER GUIDE for ShinyGLiM. At this point, we’ll just be working on the
first step: <em>Tidy Data</em>. The first thing you want to do, on the User Guide page,
is choose your data. However for now there’s only one data set: the ‘games’
data we collected last week… plus some extra data: and yes, I made some of your
other lecturers do the tasks too!<br />
<br />
</p>
</div>
<div id="subsetting-data" class="section level2">
<h2><span class="header-section-number">4.6</span> SUBSETTING DATA</h2>
<p>On the DATA tab, you can see the games data. There are two panels on the right
hand side: DATA FRAME and CODE (if your browser window is narrow or you’re
using a smartphone or a tablet then these might be at the bottom of the
page). Click on the CODE tab. These two lines of
code are what you need to read in the games data and get R to show it.</p>
<p>On the left are some options. You can choose rows by row numbers or variable
values, and columns by column numbers or column names.<br />
<br />
</p>
<div id="slice" class="section level3">
<h3><span class="header-section-number">4.6.1</span> <code>slice()</code></h3>
<p>First we’ll pick some rows by their number using <code>slice</code>. Change the row numbers
slider to pick a subset of the dataframe rows.</p>
<ul>
<li>check that the DATA FRAME displayed has changed like you expect it to</li>
<li>take a look at the CODE panel to see how it’s changed</li>
</ul>
<p><em>Question: which of the above topics (reading data, <code>slice()</code>, <code>filter()</code>,
<code>select()</code>, <code>mutate()</code>, pipe) are we using in this code?</em><br />
<br />
</p>
<p>Note how we assign <code>&lt;-</code> the smallest and largest row values to
<code>rows</code> and then use these values later to subset the data with <code>seq()</code> and
<code>slice()</code>.</p>
<p><em>Question: Why might we want to take this approach rather than just using
the values directly?</em></p>
<p><em>Question: Based on what you learned in the basic R worksheet, how could you
achieve the same subset of data with a slightly different approach in
specifying the rows to take out?</em><br />
<br />
</p>
<p>You’ll notice that we use a <strong>pipe</strong> <code>%&gt;%</code> in this code:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data-handling-and-management.html#cb55-1"></a>dataSubset &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></span>
<span id="cb55-2"><a href="data-handling-and-management.html#cb55-2"></a><span class="st">    </span><span class="kw">slice</span>( <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) )</span></code></pre></div>
<p>The pipe is a way of taking whatever you have and then passing it to the next
function. So, here we take <code>data</code>, and then pass it to <code>slice()</code> to chop out
some rows. We could do this a different way without a pipe:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-handling-and-management.html#cb56-1"></a>dataSubset &lt;-<span class="st"> </span><span class="kw">slice</span>(data, <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) )</span></code></pre></div>
<p>For something short like we’re doing here, this might make sense. But as you
need to do more and more things with your data, this gets more complicated as
you end up with functions inside functions, parentheses within parentheses…<br />
<br />
</p>
</div>
<div id="select" class="section level3">
<h3><span class="header-section-number">4.6.2</span> <code>select()</code></h3>
<p>As an example of how the pipe is useful, let’s also choose certain columns.
For now we’ll choose by column number. Pick “Choose by… Column numbers” and
change the slider to whatever values you want. Check the DATA FRAME to check
you have the right ones, then check the CODE to see what you have. Notice that
there’s a further step in the data subsetting.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data-handling-and-management.html#cb57-1"></a>dataSubset &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></span>
<span id="cb57-2"><a href="data-handling-and-management.html#cb57-2"></a><span class="st">    </span><span class="kw">slice</span>( <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) ) <span class="op">%&gt;%</span></span>
<span id="cb57-3"><a href="data-handling-and-management.html#cb57-3"></a><span class="st">        </span><span class="kw">select</span>( <span class="kw">seq</span>(cols[<span class="dv">1</span>], cols[<span class="dv">2</span>], <span class="dv">1</span>) ) </span></code></pre></div>
<p><em>Question: using information from the R basics worksheet, how would you choose
columns (or rows) that aren’t in a sequence, for example only columns 2 and 4?</em><br />
<br />
</p>
<p>Let’s imagine what that the above code would look like without pipes…</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-handling-and-management.html#cb58-1"></a>dataSubset &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">slice</span>(data, <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) ), <span class="kw">seq</span>(cols[<span class="dv">1</span>], cols[<span class="dv">2</span>], <span class="dv">1</span>))</span></code></pre></div>
<p>Yeah, not great. Lesson: pipes <em>are</em> great!<br />
<br />
</p>
<p>Most of the time we don’t want to (or more accurately shouldn’t) select a
column using its number. We have variables, and those variables are named,
and we’re much less likely to make a mistake if we use those names rather
than picking the wrong number. Choose the option to choose columns using variable
names, and take out whichever ones you feel like. Note how the code then changes,
and you’re selecting variables by name instead of by number. That’s way more trustworthy.</p>
<p><em>Question: What could you write instead of the code you now see, if you just
wanted to remove one of the variables? Hint… the answer can be found in the
section on ´select()´ in Getting Started with R.</em><br />
<br />
</p>
</div>
<div id="filter" class="section level3">
<h3><span class="header-section-number">4.6.3</span> <code>filter()</code></h3>
<p>Selecting rows using numbers is also not the best way to go about things. Choose
the option to select rows using variable values.</p>
<p>There’s a bit more thinking with this one. Cast your brain back to the R basics
worksheet and what a <em>logical</em> is. In the text box you can see there, you can type
any logical that involves any of the variables, using any of the logical
operators you encountered in the R basics exercise (or other ones as well if you
know them!). Think about whether the variable is continuous or categorical, and
which logical operators work with which variables. Here are some ideas to
start: <code>pict_cards &gt;= 1</code> gives you every person who got at least 1 picture card;
<code>role == "student"</code> gives you all the values for students.</p>
<p><em>Task: subset the data to rows for people with negative forward fold numbers.
If you think you know how, subset the data to rows for people with negative
forward fold numbers</em> <strong>&amp;</strong> <em>who are students. Hint: there’s a bold statement
there indicating how you might do that.</em><br />
</p>
</div>
</div>
<div id="adding-variables" class="section level2">
<h2><span class="header-section-number">4.7</span> ADDING VARIABLES</h2>
<p>Sometimes we might want to add a variable to the data frame that’s some kind of
function of one or more other variables.<br />
<br />
</p>
<div id="mutate" class="section level3">
<h3><span class="header-section-number">4.7.1</span> <code>mutate()</code></h3>
<p><code>mutate()</code> is the function we’ll use to add variables. Imagine, for example,
that you realised your ruler was snapped and started at 5cm. That would mean all
the reaction measures are 5cm too high! So, choose the option to add a variable.
Pick a name for this corrected reaction measure, write in the correct code for its
value and add it to the data. Take a look at the code to see what’s changed.</p>
<p><em>Question: is it possible to add this variable before we subset the data? Would
we always want to add afterwards, or before, or a mix?</em><br />
</p>
<hr />
</div>
</div>
<div id="part-2" class="section level2">
<h2><span class="header-section-number">4.8</span> PART 2</h2>
<p>We’ll now put some of that learning into practise with a few tasks with the
data. Try and complete these on your own, without consulting the app, and
I’m sure you copied the code over from the app as was suggested, so you can
edit that as you need to. First, pretty simple, but pretty important…<br />
<br />
</p>
<p><em>Task: read in the games data</em><br />
<br />
</p>
<p>You’re interested in whether luck truly is a real thing in life, as you think
men are unluckier than any other gender. Drawing a picture card is unlucky, as
picture cards look at you funny and you’re pretty sure they’re up to no good.
Drawing a black card is luckier than drawing a red card, as red is the colour
of the devil. There are several steps to preparing your data…</p>
<p><em>Task: prepare your lucky, lucky data…</em></p>
<ul>
<li><em>You don’t want to use any data from people who drew 4 cards, as 4 represents
the 4 horsemen of the apocalypse. Remove any data where someone chose 4 cards.</em></li>
<li><em>You don’t care about any variable that isn’t associated with the cards, except
for the identity of the person: their gender and their group. Get rid of the
variables you don’t care about.</em></li>
<li><em>You need to know how many non-picture cards there were for each person, so
calculate that and add it to your data.</em><br />
</li>
</ul>
<p><em>Questions:</em></p>
<ul>
<li><em>How many rows of data do you have left?</em></li>
<li><em>What function would you use to arrange the rows of the data frame by the number of
picture cards drawn? (Hint: see the Getting Started with R book)… can you
write the code that would do that?</em></li>
<li><em>What’s the mean total number of black cards drawn?</em></li>
<li><em>What are the mean numbers of picture cards drawn, separately for each gender?
Hint: you can look at p. 71 of Getting Started With R for this one, and we’ll
encounter it later in the course as well.</em><br />
</li>
</ul>
<hr />
</div>
<div id="final-tips" class="section level2">
<h2><span class="header-section-number">4.9</span> FINAL TIPS</h2>
<p>That’s a whistle-stop tour in data tidying. I’d encourage you to also look at
p.75 of <em>Getting Started With R</em> which shows how this information maps on to
the <em>base-R</em> methods for working with <code>data.frame</code>s. Most people will use these,
and they can sometimes be quicker and easier when you just have something
very simple to do (this is a general rule with the <code>tidyverse</code> packages:
often if you have something quick to do, then the base-R approach is better).
Either approach is equally as valid.<br />
<br />
</p>
<p>Note how I write R code: where there are spaces, what the indentation looks like,
etc. This is code <em>formatting</em> and there’s an accepted standard for what it
should look like. Confusingly, it does matter in some instances where you do or
do not put a space, but most of the time you can put a space (in fact as many spaces
as you like), wherever you want. It’s not the end of the world if you don’t keep
to the proper standards, but it does make code way easier to read.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="single-variable-plots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="two-variable-plots.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04_DataHandling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DSftLS_book.pdf", "DSftLS_book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
