<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="4.6 SUBSETTING DATA | A Minimal Book Example" />
<meta property="og:type" content="book" />


<meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
<meta name="github-repo" content="rstudio/bookdown-demo" />

<meta name="author" content="Yihui Xie" />

<meta name="date" content="2020-08-17" />


<meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook.">

<title>4.6 SUBSETTING DATA | A Minimal Book Example</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li class="has-sub"><a href="index.html#before-we-start"><span class="toc-section-number">1</span> Before we start…</a><ul>
<li><a href="1-1-schedule.html#schedule"><span class="toc-section-number">1.1</span> Schedule</a></li>
<li><a href="1-2-assessments.html#assessments"><span class="toc-section-number">1.2</span> Assessments</a></li>
<li><a href="1-3-installing-r-and-rstudio.html#installing-r-and-rstudio"><span class="toc-section-number">1.3</span> Installing R and RStudio</a></li>
<li><a href="1-4-installing-r-packages.html#installing-r-packages"><span class="toc-section-number">1.4</span> Installing R packages</a></li>
<li><a href="1-5-iains-notes.html#iains-notes"><span class="toc-section-number">1.5</span> iain’s notes</a></li>
</ul></li>
<li class="has-sub"><a href="2-r-basics.html#r-basics"><span class="toc-section-number">2</span> R BASICS</a><ul>
<li><a href="2-1-resources.html#resources"><span class="toc-section-number">2.1</span> RESOURCES</a></li>
<li><a href="2-2-r-basics-1.html#r-basics-1"><span class="toc-section-number">2.2</span> R BASICS</a></li>
<li><a href="2-3-objects.html#objects"><span class="toc-section-number">2.3</span> OBJECTS</a></li>
<li><a href="2-4-classes.html#classes"><span class="toc-section-number">2.4</span> CLASSES</a></li>
<li class="has-sub"><a href="2-5-class-types.html#class-types"><span class="toc-section-number">2.5</span> CLASS TYPES</a><ul>
<li><a href="2-5-class-types.html#numeric-and-character"><span class="toc-section-number">2.5.1</span> numeric and character</a></li>
<li><a href="2-5-class-types.html#factor"><span class="toc-section-number">2.5.2</span> factor</a></li>
<li><a href="2-5-class-types.html#logical"><span class="toc-section-number">2.5.3</span> logical</a></li>
<li><a href="2-5-class-types.html#data.frame"><span class="toc-section-number">2.5.4</span> data.frame</a></li>
</ul></li>
<li><a href="2-6-final-tips.html#final-tips"><span class="toc-section-number">2.6</span> FINAL TIPS</a></li>
</ul></li>
<li class="has-sub"><a href="3-single-variable-plots.html#single-variable-plots"><span class="toc-section-number">3</span> SINGLE VARIABLE PLOTS</a><ul>
<li><a href="2-1-resources.html#resources"><span class="toc-section-number">3.1</span> RESOURCES</a></li>
<li><a href="3-2-packages.html#packages"><span class="toc-section-number">3.2</span> PACKAGES</a></li>
<li><a href="3-3-plotting-single-variables.html#plotting-single-variables"><span class="toc-section-number">3.3</span> PLOTTING SINGLE VARIABLES</a></li>
<li><a href="3-4-part-1.html#part-1"><span class="toc-section-number">3.4</span> PART 1</a></li>
<li><a href="3-5-user-guide.html#user-guide"><span class="toc-section-number">3.5</span> USER GUIDE</a></li>
<li><a href="3-6-subsetting-data.html#subsetting-data"><span class="toc-section-number">3.6</span> SUBSETTING DATA</a></li>
<li class="has-sub"><a href="3-7-data-visualisation-one-variable.html#data-visualisation-one-variable"><span class="toc-section-number">3.7</span> DATA VISUALISATION (ONE VARIABLE)</a><ul>
<li><a href="3-7-data-visualisation-one-variable.html#forward-fold"><span class="toc-section-number">3.7.1</span> FORWARD FOLD</a></li>
<li><a href="3-7-data-visualisation-one-variable.html#ruler-reaction"><span class="toc-section-number">3.7.2</span> RULER REACTION</a></li>
<li><a href="3-7-data-visualisation-one-variable.html#paper-balls"><span class="toc-section-number">3.7.3</span> PAPER BALLS</a></li>
</ul></li>
<li><a href="3-8-part-2.html#part-2"><span class="toc-section-number">3.8</span> PART 2</a></li>
</ul></li>
<li class="has-sub"><a href="4-data-handling-and-management.html#data-handling-and-management"><span class="toc-section-number">4</span> DATA HANDLING AND MANAGEMENT</a><ul>
<li><a href="2-1-resources.html#resources"><span class="toc-section-number">4.1</span> RESOURCES</a></li>
<li><a href="3-2-packages.html#packages"><span class="toc-section-number">4.2</span> PACKAGES</a></li>
<li><a href="4-3-data-handling.html#data-handling"><span class="toc-section-number">4.3</span> DATA HANDLING</a></li>
<li><a href="3-4-part-1.html#part-1"><span class="toc-section-number">4.4</span> PART 1</a></li>
<li><a href="3-5-user-guide.html#user-guide"><span class="toc-section-number">4.5</span> USER GUIDE</a></li>
<li class="has-sub"><a href="3-6-subsetting-data.html#subsetting-data"><span class="toc-section-number">4.6</span> SUBSETTING DATA</a><ul>
<li><a href="4-6-subsetting-data.html#slice"><span class="toc-section-number">4.6.1</span> <code>slice()</code></a></li>
<li><a href="4-6-subsetting-data.html#select"><span class="toc-section-number">4.6.2</span> <code>select()</code></a></li>
<li><a href="4-6-subsetting-data.html#filter"><span class="toc-section-number">4.6.3</span> <code>filter()</code></a></li>
</ul></li>
<li class="has-sub"><a href="4-7-adding-variables.html#adding-variables"><span class="toc-section-number">4.7</span> ADDING VARIABLES</a><ul>
<li><a href="4-7-adding-variables.html#mutate"><span class="toc-section-number">4.7.1</span> <code>mutate()</code></a></li>
</ul></li>
<li><a href="3-8-part-2.html#part-2"><span class="toc-section-number">4.8</span> PART 2</a></li>
<li><a href="2-6-final-tips.html#final-tips"><span class="toc-section-number">4.9</span> FINAL TIPS</a></li>
</ul></li>
<li class="has-sub"><a href="5-two-variable-plots.html#two-variable-plots"><span class="toc-section-number">5</span> TWO-VARIABLE PLOTS</a><ul>
<li><a href="2-1-resources.html#resources"><span class="toc-section-number">5.1</span> RESOURCES</a></li>
<li><a href="3-2-packages.html#packages"><span class="toc-section-number">5.2</span> PACKAGES</a></li>
<li><a href="5-3-plotting-multiple-variables.html#plotting-multiple-variables"><span class="toc-section-number">5.3</span> PLOTTING MULTIPLE VARIABLES</a></li>
<li><a href="3-4-part-1.html#part-1"><span class="toc-section-number">5.4</span> PART 1</a></li>
<li><a href="3-5-user-guide.html#user-guide"><span class="toc-section-number">5.5</span> USER GUIDE</a></li>
<li><a href="3-6-subsetting-data.html#subsetting-data"><span class="toc-section-number">5.6</span> SUBSETTING DATA</a></li>
<li class="has-sub"><a href="5-7-data-visualisation-two-variables.html#data-visualisation-two-variables"><span class="toc-section-number">5.7</span> DATA VISUALISATION (TWO VARIABLES)</a><ul>
<li><a href="5-7-data-visualisation-two-variables.html#scatter-points-plots"><span class="toc-section-number">5.7.1</span> SCATTER (POINTS) PLOTS</a></li>
<li><a href="5-7-data-visualisation-two-variables.html#box-plots"><span class="toc-section-number">5.7.2</span> BOX PLOTS</a></li>
<li><a href="5-7-data-visualisation-two-variables.html#violin-plots"><span class="toc-section-number">5.7.3</span> VIOLIN PLOTS</a></li>
<li><a href="5-7-data-visualisation-two-variables.html#bar-plots"><span class="toc-section-number">5.7.4</span> BAR PLOTS</a></li>
<li><a href="5-7-data-visualisation-two-variables.html#experimental-design-nonindependence-and-bias"><span class="toc-section-number">5.7.5</span> EXPERIMENTAL DESIGN, NONINDEPENDENCE AND BIAS</a></li>
</ul></li>
<li><a href="3-8-part-2.html#part-2"><span class="toc-section-number">5.8</span> PART 2</a></li>
</ul></li>
<li><a href="references.html#references">References</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="subsetting-data" class="section level2">
<h2><span class="header-section-number">4.6</span> SUBSETTING DATA</h2>
<p>On the DATA tab, you can see the games data. There are two panels on the right
hand side: DATA FRAME and CODE (if your browser window is narrow or you’re
using a smartphone or a tablet then these might be at the bottom of the
page). Click on the CODE tab. These two lines of
code are what you need to read in the games data and get R to show it.</p>
<p>On the left are some options. You can choose rows by row numbers or variable
values, and columns by column numbers or column names.<br />
<br />
</p>
<div id="slice" class="section level3">
<h3><span class="header-section-number">4.6.1</span> <code>slice()</code></h3>
<p>First we’ll pick some rows by their number using <code>slice</code>. Change the row numbers
slider to pick a subset of the dataframe rows.</p>
<ul>
<li>check that the DATA FRAME displayed has changed like you expect it to</li>
<li>take a look at the CODE panel to see how it’s changed</li>
</ul>
<p><em>Question: which of the above topics (reading data, <code>slice()</code>, <code>filter()</code>,
<code>select()</code>, <code>mutate()</code>, pipe) are we using in this code?</em><br />
<br />
</p>
<p>Note how we assign <code>&lt;-</code> the smallest and largest row values to
<code>rows</code> and then use these values later to subset the data with <code>seq()</code> and
<code>slice()</code>.</p>
<p><em>Question: Why might we want to take this approach rather than just using
the values directly?</em></p>
<p><em>Question: Based on what you learned in the basic R worksheet, how could you
achieve the same subset of data with a slightly different approach in
specifying the rows to take out?</em><br />
<br />
</p>
<p>You’ll notice that we use a <strong>pipe</strong> <code>%&gt;%</code> in this code:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="4-6-subsetting-data.html#cb54-1"></a>dataSubset &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></span>
<span id="cb54-2"><a href="4-6-subsetting-data.html#cb54-2"></a><span class="st">    </span><span class="kw">slice</span>( <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) )</span></code></pre></div>
<p>The pipe is a way of taking whatever you have and then passing it to the next
function. So, here we take <code>data</code>, and then pass it to <code>slice()</code> to chop out
some rows. We could do this a different way without a pipe:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="4-6-subsetting-data.html#cb55-1"></a>dataSubset &lt;-<span class="st"> </span><span class="kw">slice</span>(data, <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) )</span></code></pre></div>
<p>For something short like we’re doing here, this might make sense. But as you
need to do more and more things with your data, this gets more complicated as
you end up with functions inside functions, parentheses within parentheses…<br />
<br />
</p>
</div>
<div id="select" class="section level3">
<h3><span class="header-section-number">4.6.2</span> <code>select()</code></h3>
<p>As an example of how the pipe is useful, let’s also choose certain columns.
For now we’ll choose by column number. Pick “Choose by… Column numbers” and
change the slider to whatever values you want. Check the DATA FRAME to check
you have the right ones, then check the CODE to see what you have. Notice that
there’s a further step in the data subsetting.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="4-6-subsetting-data.html#cb56-1"></a>dataSubset &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span></span>
<span id="cb56-2"><a href="4-6-subsetting-data.html#cb56-2"></a><span class="st">    </span><span class="kw">slice</span>( <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) ) <span class="op">%&gt;%</span></span>
<span id="cb56-3"><a href="4-6-subsetting-data.html#cb56-3"></a><span class="st">        </span><span class="kw">select</span>( <span class="kw">seq</span>(cols[<span class="dv">1</span>], cols[<span class="dv">2</span>], <span class="dv">1</span>) ) </span></code></pre></div>
<p><em>Question: using information from the R basics worksheet, how would you choose
columns (or rows) that aren’t in a sequence, for example only columns 2 and 4?</em><br />
<br />
</p>
<p>Let’s imagine what that the above code would look like without pipes…</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="4-6-subsetting-data.html#cb57-1"></a>dataSubset &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="kw">slice</span>(data, <span class="kw">seq</span>(rows[<span class="dv">1</span>], rows[<span class="dv">2</span>], <span class="dv">1</span>) ), <span class="kw">seq</span>(cols[<span class="dv">1</span>], cols[<span class="dv">2</span>], <span class="dv">1</span>))</span></code></pre></div>
<p>Yeah, not great. Lesson: pipes <em>are</em> great!<br />
<br />
</p>
<p>Most of the time we don’t want to (or more accurately shouldn’t) select a
column using its number. We have variables, and those variables are named,
and we’re much less likely to make a mistake if we use those names rather
than picking the wrong number. Choose the option to choose columns using variable
names, and take out whichever ones you feel like. Note how the code then changes,
and you’re selecting variables by name instead of by number. That’s way more trustworthy.</p>
<p><em>Question: What could you write instead of the code you now see, if you just
wanted to remove one of the variables? Hint… the answer can be found in the
section on ´select()´ in Getting Started with R.</em><br />
<br />
</p>
</div>
<div id="filter" class="section level3">
<h3><span class="header-section-number">4.6.3</span> <code>filter()</code></h3>
<p>Selecting rows using numbers is also not the best way to go about things. Choose
the option to select rows using variable values.</p>
<p>There’s a bit more thinking with this one. Cast your brain back to the R basics
worksheet and what a <em>logical</em> is. In the text box you can see there, you can type
any logical that involves any of the variables, using any of the logical
operators you encountered in the R basics exercise (or other ones as well if you
know them!). Think about whether the variable is continuous or categorical, and
which logical operators work with which variables. Here are some ideas to
start: <code>pict_cards &gt;= 1</code> gives you every person who got at least 1 picture card;
<code>role == "student"</code> gives you all the values for students.</p>
<p><em>Task: subset the data to rows for people with negative forward fold numbers.
If you think you know how, subset the data to rows for people with negative
forward fold numbers</em> <strong>&amp;</strong> <em>who are students. Hint: there’s a bold statement
there indicating how you might do that.</em><br />
</p>
</div>
</div>
<p style="text-align: center;">
<a href="4-5-user-guide.html"><button class="btn btn-default">Previous</button></a>
<a href="4-7-adding-variables.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
